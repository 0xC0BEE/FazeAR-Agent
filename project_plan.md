
# FazeAR: AI Accounts Receivable Agent - Project Plan

This document outlines the development plan and progress for the FazeAR project, an AI-powered Accounts Receivable management platform.

---

## ✅ Phase 1: Foundational UI & Core Logic (Complete)

**Goal:** Establish the basic application structure, data models, and a user interface for managing AR workflows.

-   [x] **UI Scaffolding:** Create the main application layout (`App.tsx`), including a header and a main content area.
-   [x] **Data Models:** Define core TypeScript types for `Workflow`, `User`, `Note`, `Task`, and `DunningPlan`.
-   [x] **Workflow Tracker:** Build a component to display a list of all active AR workflows.
-   [x] **Inspector Panel:** Create a detailed view to inspect a selected workflow's notes, tasks, and history.
-   [x] **Role-Based Access Control (RBAC):** Implement a user-switching mechanism and adapt the UI based on the user's role (Collector, Manager, Admin).
-   [x] **Basic State Management:** Implement client-side state for all workflows, users, and UI interactions.

---

## ✅ Phase 2: AI Integration & Basic Chat (Complete)

**Goal:** Integrate the Gemini API to create a basic conversational AI assistant.

-   [x] **Gemini Service Layer:** Create a service file to handle all API calls to the Gemini API, following best practices.
-   [x] **Conversational Chat Interface:** Build a dedicated chat UI where users can have a basic conversation with the AI agent.
-   [x] **AI-Powered Analytics Insights:** Enable the agent to answer basic questions about the application's data (e.g., "Summarize the aging report").
-   [x] **Manual AI-Powered Actions:** Implement initial AI-powered actions, such as drafting an email based on a user prompt.

---

## ✅ Phase 3: Architectural Upgrade - The Tool-Based Agent (Complete)

**Goal:** Transform the AI from a simple chatbot into a true, intelligent agent using Gemini's Function Calling feature.

-   [x] **Overhaul AI Service:** Refactor the Gemini service to use a single, powerful `runAgent` function that manages a multi-turn, function-calling conversation.
-   [x] **Define Agent Tools:** Define a comprehensive suite of function declarations for tools the agent can use, such as `add_note`, `add_task`, `draft_email`, `send_email`, etc.
-   [x] **Implement Agent Orchestrator:** Build the core logic in `App.tsx` to manage the back-and-forth between the user, the agent, and its tools.
-   [x] **Centralize Actions:** Refactor UI elements (e.g., "Add Note" button) to trigger conversational commands for the agent, rather than manipulating state directly.

---

## ✅ Phase 4: AI-Powered Strategic Planning (Complete)

**Goal:** Empower the agent to assist with strategic financial forecasting.

-   [x] **"What-If" Scenario Tool:** Create a `run_cash_flow_scenario` tool that allows the agent to calculate the impact of hypothetical payment scenarios.
-   [x] **Dynamic Chart Updates:** Connect the agent's tool to the `CashFlowChart` to provide immediate, visual feedback on "what-if" questions.
-   [x] **Clear Scenario Tool:** Implement a `clear_cash_flow_scenario` tool for the agent to revert the chart to its default state.

---

## ✅ Phase 5: Agent Autonomy & Proactive Actions (Complete)

**Goal:** Elevate the agent from a reactive co-pilot to a proactive, autonomous team member.

-   [x] **Autonomous Mode:** Implement a setting for Managers/Admins to enable the agent to run its own daily cycle.
-   [x] **Strategic Suggestion Tool:** Create a `suggest_dunning_plan_change` tool. In autonomous mode, the agent analyzes client history and proposes strategic changes for manager approval.
-   [x] **Proactive Execution Tool:** Create an `execute_dunning_actions` tool. In autonomous mode, the agent identifies and executes all due reminder actions.
-   [x] **UI for Suggestions & Autonomy:** Enhance the chat to render actionable suggestions (with Approve/Decline buttons) and to visually distinguish messages generated by the autonomous agent.

---

## ✅ Phase 6: Advanced Agent Collaboration (Complete)

**Goal:** Make the agent a true collaborative partner in user workflows.

-   [x] **AI-Powered Tone Adjustment:** Implement the ability for a user to provide feedback on an AI-generated draft (e.g., "Make this more formal"), prompting the agent to iteratively redraft the content.

---

## ✅ Phase 7: Multimodal Capabilities (Complete)

**Goal:** Expand the agent's abilities to understand and analyze visual data.

-   [x] **Document Analysis UI:** Add a file uploader to the `InspectorPanel`.
-   [x] **Multimodal AI Service:** Implement a service function that sends both an image and a text prompt to the Gemini API.
-   [x] **Conversational Q&A:** Allow users to upload a document and ask the agent specific questions about its contents.

---

## ✅ Phase 8: Predictive AI Capabilities (Complete)

**Goal:** Move the agent from being reactive to being predictive.

-   [x] **Payment Likelihood Tool:** Create a `predict_payment_likelihood` tool that allows the agent to analyze a client's payment history and assess the risk of a late payment.
-   [x] **Risk Visualization:** Enhance the `WorkflowCard` to display a "Risk Level" badge, providing collectors with an at-a-glance strategic overview.

---

## ✅ Phase 9: Advanced Negotiation (Complete)

**Goal:** Empower the agent to handle more complex collection scenarios.

-   [x] **Settlement Proposal Tool:** Create a `propose_settlement` tool that allows the agent to draft a settlement offer with a specified discount.
-   [x] **Manager-Authorized Negotiation:** Add UI in the `InspectorPanel` for authorized users (Managers/Admins) to initiate a settlement proposal for overdue workflows.

---

## ✅ Phase 10: Enterprise Automation (Complete)

**Goal:** Implement a "killer feature" that addresses a major pain point in enterprise AR.

-   [x] **AI-Powered Cash Application:**
    -   [x] **Multimodal Analysis Tool:** Create a `match_payment_to_invoices` tool that can parse remittance information (from pasted text or an uploaded document).
    -   [x] **Structured Data Response:** The agent will return a structured JSON object of its findings.
    -   [x] **Confirmation UI:** Build a confirmation modal for the user to review and approve the agent's proposed payment matches before they are applied.

---

## Future Roadmap: Next-Generation Enterprise Features

**Goal:** Build out the remaining features to position FazeAR as a top-tier, market-leading AR automation platform.

-   [ ] **Automated Deductions & Dispute Management:**
    -   **Concept:** Automatically identify short payments, create "Dispute Cases," and use the agent to categorize the reason and initiate communication with the client.
    -   **Value:** Brings structure to a chaotic process, reduces revenue leakage, and speeds up resolution.

-   [ ] **Interactive Client Collaboration Portal:**
    -   **Concept:** Transform the payment portal into a secure, two-way communication hub where clients can interact directly with a secure, client-facing version of the FazeAR agent.
    -   **Value:** Creates a world-class customer experience and drastically reduces the volume of inbound emails and phone calls.
